{"ast":null,"code":"var _jsxFileName = \"D:\\\\chess-clone\\\\frontend\\\\src\\\\screens\\\\game.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Chessboard from '../components/chessboard';\nimport useSocket from '../hooks/useSocket';\nimport { Chess } from \"chess.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Game() {\n  _s();\n  const socket = useSocket();\n  const [chess, setChess] = useState(new Chess());\n  const [board, setBoard] = useState(chess.board());\n  useEffect(() => {\n    if (!socket) return;\n    socket.onmessage = event => {\n      const message = JSON.parse(event.data);\n      console.log(message);\n      switch (message.type) {\n        case \"init_game\":\n          setChess(new Chess());\n          setBoard(chess.board());\n          console.log(\"Game initialisation\");\n          break;\n        case \"move\":\n          const move = message.payload;\n          chess.move(move);\n          setBoard(chess.board());\n          console.log(\"Move\");\n          break;\n        case \"game_over\":\n          console.log(\"game over\");\n          break;\n        default:\n          break;\n      }\n    };\n  }, [socket]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"justify-center flex pt-8 max-w-screen-lg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-6 gap-4 w-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-4 self-center justify-center flex\",\n        children: /*#__PURE__*/_jsxDEV(Chessboard, {\n          board: board\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-2 flex justify-center self-center\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            socket.send(JSON.stringify({\n              type: \"init_game\"\n            }));\n          },\n          children: \"Play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 4\n  }, this);\n}\n_s(Game, \"4l53ngDpQna7sBeV0KdHBYyJJE8=\", false, function () {\n  return [useSocket];\n});\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useState","Chessboard","useSocket","Chess","jsxDEV","_jsxDEV","Game","_s","socket","chess","setChess","board","setBoard","onmessage","event","message","JSON","parse","data","console","log","type","move","payload","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","send","stringify","_c","$RefreshReg$"],"sources":["D:/chess-clone/frontend/src/screens/game.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Chessboard from '../components/chessboard'\r\nimport useSocket from '../hooks/useSocket'\r\nimport {Chess} from \"chess.js\"\r\n\r\nfunction Game() {\r\n    const socket = useSocket();\r\n    const [chess, setChess] = useState(new Chess())\r\n    const [board, setBoard] = useState(chess.board())\r\n\r\n    useEffect(()=>{\r\nif(!socket)\r\nreturn\r\n\r\nsocket.onmessage = (event)=>\r\n{\r\nconst message = JSON.parse(event.data);\r\nconsole.log(message)\r\nswitch (message.type) {\r\n    case \"init_game\":\r\n        setChess(new Chess());\r\n        setBoard(chess.board())\r\n        console.log(\"Game initialisation\")\r\n                break;\r\n                case \"move\":\r\n                    const move = message.payload;\r\n                    chess.move(move)\r\n                    setBoard(chess.board())\r\n                    console.log(\"Move\")\r\n                    break;\r\n                    case \"game_over\":\r\n                        console.log(\"game over\")\r\n                        break;\r\n\r\n    default:\r\n        break;\r\n}\r\n}\r\n    },[socket])\r\n  return (\r\n   <div className='justify-center flex pt-8 max-w-screen-lg'>\r\n    <div className='grid grid-cols-1 md:grid-cols-6 gap-4 w-full'>\r\n<div className='col-span-4 self-center justify-center flex'>\r\n    <Chessboard board ={board} />\r\n</div>\r\n<div className='col-span-2 flex justify-center self-center'>\r\n    <button onClick={()=>\r\n    {\r\n        socket.send(JSON.stringify({\r\n            type :\"init_game\",\r\n\r\n        }))\r\n    }}>Play</button>\r\n</div>\r\n    </div>\r\n   </div>\r\n  )\r\n}\r\n\r\nexport default Game"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,SAAQC,KAAK,QAAO,UAAU;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9B,SAASC,IAAIA,CAAA,EAAG;EAAAC,EAAA;EACZ,MAAMC,MAAM,GAAGN,SAAS,CAAC,CAAC;EAC1B,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,IAAIG,KAAK,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAACS,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC;EAEjDZ,SAAS,CAAC,MAAI;IAClB,IAAG,CAACS,MAAM,EACV;IAEAA,MAAM,CAACK,SAAS,GAAIC,KAAK,IACzB;MACA,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;MACtCC,OAAO,CAACC,GAAG,CAACL,OAAO,CAAC;MACpB,QAAQA,OAAO,CAACM,IAAI;QAChB,KAAK,WAAW;UACZX,QAAQ,CAAC,IAAIP,KAAK,CAAC,CAAC,CAAC;UACrBS,QAAQ,CAACH,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC;UACvBQ,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;UAC1B;QACA,KAAK,MAAM;UACP,MAAME,IAAI,GAAGP,OAAO,CAACQ,OAAO;UAC5Bd,KAAK,CAACa,IAAI,CAACA,IAAI,CAAC;UAChBV,QAAQ,CAACH,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC;UACvBQ,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;UACnB;QACA,KAAK,WAAW;UACZD,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;UACxB;QAEpB;UACI;MACR;IACA,CAAC;EACG,CAAC,EAAC,CAACZ,MAAM,CAAC,CAAC;EACb,oBACCH,OAAA;IAAKmB,SAAS,EAAC,0CAA0C;IAAAC,QAAA,eACxDpB,OAAA;MAAKmB,SAAS,EAAC,8CAA8C;MAAAC,QAAA,gBACjEpB,OAAA;QAAKmB,SAAS,EAAC,4CAA4C;QAAAC,QAAA,eACvDpB,OAAA,CAACJ,UAAU;UAACU,KAAK,EAAGA;QAAM;UAAAe,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CAAC,eACNxB,OAAA;QAAKmB,SAAS,EAAC,4CAA4C;QAAAC,QAAA,eACvDpB,OAAA;UAAQyB,OAAO,EAAEA,CAAA,KACjB;YACItB,MAAM,CAACuB,IAAI,CAACf,IAAI,CAACgB,SAAS,CAAC;cACvBX,IAAI,EAAE;YAEV,CAAC,CAAC,CAAC;UACP,CAAE;UAAAI,QAAA,EAAC;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAET;AAACtB,EAAA,CApDQD,IAAI;EAAA,QACMJ,SAAS;AAAA;AAAA+B,EAAA,GADnB3B,IAAI;AAsDb,eAAeA,IAAI;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}